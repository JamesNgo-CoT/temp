"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}window.jsmvc||(window.jsmvc={}),jsmvc.collectionPropertyDescriptors={definedBy_collectionPropertyDescriptors:{value:!0},collectionData:{writable:!0},length:{get:function(){return this.collectionData?this.collectionData.length:0}},finalizeData:{value:function(t){for(var e=this;t!==this.length;)t<this.length?function(){var o=String(t);Object.defineProperty(e,o,{configurable:!0,enumerable:!0,set:function(t){var e=this;if(this.collectionData[o]!==t){var r=this.collectionData[o];this.itemSetter.call(this,t,function(){e.collectionData[o]=t,e.definedBy_eventfulPropertyDescriptors&&(e.trigger("change",o,t,r),e.trigger("change:".concat(o),t,r))})}},get:function(){var t=this;return this.itemGetter(function(){return t.collectionData[o]})}}),t++}():(delete this[String(t-1)],t--)}},itemSetter:{value:function(t,e){e()}},itemGetter:{value:function(t){return t()}},toArray:{value:function(){var r=this.collectionData.slice();return r.forEach(function(t,e){t.definedBy_modelPropertyDescriptors&&(r[e]=t.toJSON()),t.definedBy_collectionPropertyDescriptors&&(r[e]=t.toArray())}),r}}},["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"].forEach(function(c){jsmvc.collectionPropertyDescriptors[c]={value:function(){var t;this.collectionData||(this.collectionData=[]);for(var e=this.length,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];var i=(t=Array.prototype[c]).call.apply(t,[this.collectionData].concat(o));return this.finalizeData(e),this.definedBy_eventfulPropertyDescriptors&&this.triggerEvents("change"),i}}}),["concat","includes","indexOf","join","lastIndexOf","slice","toSource","toString","toLocaleString","entries","every","filter","find","findIndex","forEach","keys","map","reduce","reduceRight","some","values"].forEach(function(n){jsmvc.collectionPropertyDescriptors[n]={value:function(){var t;this.collectionData||(this.collectionData=[]);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(t=Array.prototype[n]).call.apply(t,[this.collectionData].concat(r))}}}),jsmvc.collection=function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(e)||(r=e,e=[]),jsmvc.eventful&&(r=jsmvc.eventful(r)),r.definedBy_collectionPropertyDescriptors||Object.defineProperties(r,jsmvc.collectionPropertyDescriptors),(t=r).push.apply(t,_toConsumableArray(e)),r};