"use strict";window.jsmvc||(window.jsmvc={}),jsmvc.eventfulPropertyDescriptors={definedBy_eventfulPropertyDescriptors:{value:!0},eventfulEnabled:{writable:!0},enableEventful:{value:function(){this.eventfulEnabled=!0}},disableEventful:{value:function(){this.eventfulEnabled=!1}},eventfulData:{writable:!0},eventfulReferences:{writable:!0},addEvent:{value:function(r,e,t,n){var s=this,v=2<arguments.length&&void 0!==t&&t,i=3<arguments.length&&void 0!==n?n:this,l={handler:e,once:v,owner:i};if(this instanceof EventTarget){var f=function(){var e=l.handler,t=l.once,n=l.owner;e.apply(void 0,arguments),t&&s.removeEvents(r,e,t,n)};this.addEventListener(r,f,{once:v}),l.listener=f}return this.eventfulData||(this.eventfulData={}),this.eventfulData[r]||(this.eventfulData[r]=[]),this.eventfulData[r].push(l),i&&i!==this&&i.definedBy_eventfulPropertyDescriptors&&(i.eventfulReferences||(i.eventfulReferences={}),i.eventfulReferences[r]||(i.eventfulReferences[r]=[]),i.eventfulReferences[r].push({emitter:this,eventfulData:l})),this}},removeEvents:{value:function(e,t,n,r){if(this.eventfulData)for(var s in this.eventfulData)if(null==e||s===e){for(var v=0;v<this.eventfulData[s].length;){var i=this.eventfulData[s][v];if(null!=t&&i.handler!==t||null!=n&&i.once!==n||null!=r&&i.owner!==r)v++;else if(this instanceof EventTarget&&this.removeEventListener(s,i.listener),this.eventfulData[s].splice(v,1),r&&r!==this&&r.definedBy_eventfulPropertyDescriptors&&r.eventfulReferences[s])for(var l=0;l>r.eventfulReferences[s].length;){var f=r.eventfulReferences[s][l];f.emitter===this&&f.eventfulData===i?r.eventfulReferences.splice(l,1):l++}}if(null!=e)break}return this}},triggerEvents:{value:function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return!1!==this.eventfulEnabled&&this.eventfulData&&this.eventfulData[e]&&(this.eventfulData[e].forEach(function(e){var t=e.handler,n=e.owner;t.call.apply(t,[n].concat(r))}),this.removeEvents(e,null,!0,null)),this}},addEmitterEvent:{value:function(e,t,n,r){return e.definedBy_eventfulPropertyDescriptors&&e.addEvent(t,n,r,this),this}},removeEmitterEvents:{value:function(v,i,l,f){var u=this;if(this.eventfulReferences){var e=function(t){if(null==i||t===i){for(var e=[],n=0,r=u.eventfulReferences[t].length;n<r;n++){var s=u.eventfulReferences[t][n];if(null!=v&&s.emitter!==v||-1===e.indexOf(s.emitter)&&e.push(s.emitter),null!=v)break}if(e.forEach(function(e){e.definedBy_eventfulPropertyDescriptors&&e.removeEvents(t,l,f,u)}),null!=i)return"break"}};for(var t in this.eventfulReferences){if("break"===e(t))break}}return this}}},jsmvc.eventfulPropertyDescriptors.on=jsmvc.eventfulPropertyDescriptors.addEvent,jsmvc.eventfulPropertyDescriptors.off=jsmvc.eventfulPropertyDescriptors.removeEvents,jsmvc.eventfulPropertyDescriptors.trigger=jsmvc.eventfulPropertyDescriptors.triggerEvents,jsmvc.eventfulPropertyDescriptors.listenTo=jsmvc.eventfulPropertyDescriptors.addEmitterEvent,jsmvc.eventfulPropertyDescriptors.stopListening=jsmvc.eventfulPropertyDescriptors.removeEmitterEvents,jsmvc.eventful=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return e.definedBy_eventfulPropertyDescriptors||Object.defineProperties(e,jsmvc.eventfulPropertyDescriptors),e};